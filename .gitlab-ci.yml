image: golang:1.7

services:
  - docker:latest

variables:
  GROUP: weaveworksdemos
  COMMIT: $CI_BUILD_REF 
  TAG: $CI_COMMIT_TAG
  REPO: catalogue;

before_script:
  - go version
  - docker -v
  - echo $CI_PROJECT_DIR
  - echo $TAG
  - echo $COMMIT
  - echo $GROUP

  #- go get -u github.com/FiloSottile/gvt
  #- gvt restore
  #- go get -u github.com/mattn/goveralls


stages:
  - unit-tests

unit-tests:
  stage: unit-tests
  script:
    - set -e
#    - docker -v
#    - ls $CI_PROJECT_DIR
#    - mkdir -p $GOPATH/src # создаем папку для запуска куда положим проект с тестами
#    - mv $CI_PROJECT_DIR/src/* $GOPATH/src # переносим выкаченный раннером проект в GOPATH
#    - cd $GOPATH/src # Переходим в папку с проектами
#    - ls -la
    #- ./scripts/build.sh;
    #- ./test/test.sh unit.py
    #- ./test/test.sh container.py --tag $TAG
#    - echo 'TAG: ${TAG}'
#    - echo GROUP: ${GROUP}
    - "echo COMMIT: $COMMIT GROUP: $GROUP TAG: $TAG"
